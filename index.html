<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>COPA WIOG ‚Äì Grupos y Resultados</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f4f8;
      padding: 40px;
      text-align: center;
    }

    h1 {
      color: #0077cc;
    }

    input, textarea, button {
      margin: 10px;
      padding: 10px;
      font-size: 16px;
    }

    .grupo {
      margin: 20px;
      padding: 15px;
      background: #fff;
      border: 1px solid #ccc;
      width: 280px;
      display: inline-block;
      text-align: left;
      vertical-align: top;
    }

    .grupo h3 {
      margin-top: 0;
      color: #0077cc;
    }

    .partido {
      margin: 10px 0;
    }

    .partido input {
      width: 40px;
      text-align: center;
    }

    #equiposLista {
      margin-top: 20px;
      font-weight: bold;
    }

    .grupos-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
  </style>
</head>
<body>

  <h1>üèÜ COPA WIOG ‚Äì Sorteo y Resultados üèÜ</h1>

  <div>
    <input type="text" id="equipoInput" placeholder="Agregar equipo individual" />
    <button onclick="agregarEquipo()">Agregar</button>
  </div>

  <div>
    <textarea id="listaEquipos" rows="6" cols="40" placeholder="Pega aqu√≠ una lista de equipos (uno por l√≠nea)"></textarea><br>
    <button onclick="agregarLista()">Agregar Lista</button>
  </div>

  <div id="equiposLista"></div>

  <button onclick="sortearGrupos()">üé≤ Sortear Grupos</button>

  <div id="gruposResultado" class="grupos-container"></div>

  <script>
    let equipos = [];

    function agregarEquipo() {
      const input = document.getElementById('equipoInput');
      const nombre = input.value.trim();
      if (nombre && !equipos.includes(nombre)) {
        equipos.push(nombre);
        input.value = '';
        mostrarEquipos();
      }
    }

    function agregarLista() {
      const lista = document.getElementById('listaEquipos').value.trim();
      if (lista) {
        const nuevos = lista.split('\n').map(e => e.trim()).filter(e => e && !equipos.includes(e));
        equipos = equipos.concat(nuevos);
        document.getElementById('listaEquipos').value = '';
        mostrarEquipos();
      }
    }

    function mostrarEquipos() {
      document.getElementById('equiposLista').innerText = `Equipos agregados (${equipos.length}): ${equipos.join(', ')}`;
    }

    function sortearGrupos() {
      if (equipos.length !== 32) {
        alert("Debes agregar exactamente 32 equipos para sortear.");
        return;
      }

      const mezclados = equipos.slice().sort(() => Math.random() - 0.5);
      const letras = 'ABCDEFGH'.split('');
      const grupos = {};
      letras.forEach((letra, i) => {
        grupos[letra] = mezclados.slice(i * 4, (i + 1) * 4);
      });

      mostrarGruposYPartidos(grupos);
    }

    function mostrarGruposYPartidos(grupos) {
      const contenedor = document.getElementById('gruposResultado');
      contenedor.innerHTML = '';

      for (const grupo in grupos) {
        const div = document.createElement('div');
        div.className = 'grupo';

        const equiposGrupo = grupos[grupo];
        const partidos = generarPartidosMundial(equiposGrupo);

        div.innerHTML = `<h3>Grupo ${grupo}</h3><ul>${equiposGrupo.map(e => `<li>${e}</li>`).join('')}</ul><hr><h4>Partidos</h4>`;

        partidos.forEach((p, idx) => {
          const partidoDiv = document.createElement('div');
          partidoDiv.className = 'partido';
          partidoDiv.innerHTML = `
            ${p[0]} 
            <input type="number" min="0" id="g${grupo}${idx}a" placeholder="0" /> 
            - 
            <input type="number" min="0" id="g${grupo}${idx}b" placeholder="0" /> 
            ${p[1]}
          `;
          div.appendChild(partidoDiv);
        });

        contenedor.appendChild(div);
      }
    }

    function generarPartidosMundial(equipos) {
      if (equipos.length !== 4) return [];

      const [A, B, C, D] = equipos;
      return [
        [A, B],
        [C, D],
        [A, C],
        [B, D],
        [A, D],
        [B, C]
      ];
    }
  </script>

</body>
</html>
